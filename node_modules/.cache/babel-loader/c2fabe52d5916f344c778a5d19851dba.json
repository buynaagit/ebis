{"ast":null,"code":"var _jsxFileName = \"/Users/hippo/Workspace/Saasland_React_April_30_2020/Saasland_React/src/Pages/NewsPublish.js\";\nimport React, { useRef } from \"react\";\nimport { URL } from \"../utils/appConstant\";\nimport { useHistory } from \"react-router-dom\";\nimport { Editor } from \"@tinymce/tinymce-react\";\nimport ImageUploader from \"react-images-upload\";\nimport axios from \"axios\"; // import { ImgUploader } from \"../components/ImgUploader\";\n\nexport default function NewsPublish() {\n  const history = useHistory();\n  const [title, setTitle] = React.useState(\"\");\n  const [category, setCategory] = React.useState(\"\");\n  const [description, setDescription] = React.useState(\"\");\n  const [image, setImage] = React.useState(\"\");\n\n  const Publish = e => {\n    e.preventDefault();\n    const config = {\n      headers: {\n        \"Content-type\": \"application/json\",\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n      }\n    };\n    console.log(`button Pressed`);\n\n    if (editorRef.current) {\n      console.log(editorRef.current.getContent());\n      setDescription(editorRef.current.getContent());\n    }\n\n    var data = new FormData();\n    data.append(\"title\", title);\n    data.append(\"category\", category);\n    data.append(\"description\", editorRef.current.getContent());\n    data.append(\"image\", image[0]);\n    return axios.post(`${URL}/api/blogs/create/`, data, config).then(function (response) {\n      console.log(`response`, response.data);\n      localStorage.setItem(\"token\", response.data.token); // history.push(\"/Landing\");\n    }).catch(function (error) {\n      console.log(`error`, error.response);\n    });\n  };\n\n  const editorRef = useRef(null);\n\n  const log = () => {\n    if (editorRef.current) {\n      console.log(editorRef.current.getContent());\n    }\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(Editor, {\n    onInit: (evt, editor) => editorRef.current = editor,\n    initialValue: \"<p>This is the initial content of the editor.</p>\",\n    init: {\n      height: 500,\n      menubar: false,\n      plugins: [\"advlist autolink lists link image charmap print preview anchor\", \"searchreplace visualblocks code fullscreen\", \"insertdatetime media table paste code help wordcount\"],\n      toolbar: \"undo redo | formatselect | \" + \"bold italic backcolor | alignleft aligncenter \" + \"alignright alignjustify | bullist numlist outdent indent | \" + \"removeformat | help\",\n      content_style: \"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"form-group text_box\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    value: title,\n    placeholder: \"Enter a title\",\n    onChange: e => setTitle(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group text_box\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    value: category,\n    placeholder: \"Enter category\",\n    onChange: e => setCategory(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"publish\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"btn_five\",\n    onClick: Publish,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, \"\\u041D\\u0438\\u0439\\u0442\\u043B\\u044D\\u0445\")), React.createElement(ImageUploader, {\n    withIcon: true,\n    buttonText: \"Choose images\",\n    onChange: setImage,\n    imgExtension: [\".jpg\", \".gif\", \".png\", \".gif\"],\n    maxFileSize: 5242880,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }));\n}","map":{"version":3,"sources":["/Users/hippo/Workspace/Saasland_React_April_30_2020/Saasland_React/src/Pages/NewsPublish.js"],"names":["React","useRef","URL","useHistory","Editor","ImageUploader","axios","NewsPublish","history","title","setTitle","useState","category","setCategory","description","setDescription","image","setImage","Publish","e","preventDefault","config","headers","Authorization","localStorage","getItem","console","log","editorRef","current","getContent","data","FormData","append","post","then","response","setItem","token","catch","error","evt","editor","height","menubar","plugins","toolbar","content_style","target","value"],"mappings":"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","sourcesContent":["import React, { useRef } from \"react\";\nimport { URL } from \"../utils/appConstant\";\nimport { useHistory } from \"react-router-dom\";\nimport { Editor } from \"@tinymce/tinymce-react\";\nimport ImageUploader from \"react-images-upload\";\nimport axios from \"axios\";\n// import { ImgUploader } from \"../components/ImgUploader\";\n\nexport default function NewsPublish() {\n  const history = useHistory();\n  const [title, setTitle] = React.useState(\"\");\n  const [category, setCategory] = React.useState(\"\");\n  const [description, setDescription] = React.useState(\"\");\n  const [image, setImage] = React.useState(\"\");\n\n  const Publish = (e) => {\n    e.preventDefault();\n    const config = {\n      headers: {\n        \"Content-type\": \"application/json\",\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n      },\n    };\n    console.log(`button Pressed`);\n    if (editorRef.current) {\n      console.log(editorRef.current.getContent());\n      setDescription(editorRef.current.getContent());\n    }\n\n    var data = new FormData();\n    data.append(\"title\", title);\n    data.append(\"category\", category);\n    data.append(\"description\", editorRef.current.getContent());\n    data.append(\"image\", image[0]);\n\n    return axios\n      .post(`${URL}/api/blogs/create/`, data, config)\n      .then(function (response) {\n        console.log(`response`, response.data);\n        localStorage.setItem(\"token\", response.data.token);\n        // history.push(\"/Landing\");\n      })\n      .catch(function (error) {\n        console.log(`error`, error.response);\n      });\n  };\n\n  const editorRef = useRef(null);\n  const log = () => {\n    if (editorRef.current) {\n      console.log(editorRef.current.getContent());\n    }\n  };\n  return (\n    <>\n      <Editor\n        onInit={(evt, editor) => (editorRef.current = editor)}\n        initialValue=\"<p>This is the initial content of the editor.</p>\"\n        init={{\n          height: 500,\n          menubar: false,\n          plugins: [\n            \"advlist autolink lists link image charmap print preview anchor\",\n            \"searchreplace visualblocks code fullscreen\",\n            \"insertdatetime media table paste code help wordcount\",\n          ],\n          toolbar:\n            \"undo redo | formatselect | \" +\n            \"bold italic backcolor | alignleft aligncenter \" +\n            \"alignright alignjustify | bullist numlist outdent indent | \" +\n            \"removeformat | help\",\n          content_style:\n            \"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }\",\n        }}\n      />\n      <div className=\"form-group text_box\">\n        <input\n          type=\"text\"\n          value={title}\n          placeholder=\"Enter a title\"\n          onChange={(e) => setTitle(e.target.value)}\n        />\n      </div>\n      <div className=\"form-group text_box\">\n        <input\n          type=\"text\"\n          value={category}\n          placeholder=\"Enter category\"\n          onChange={(e) => setCategory(e.target.value)}\n        />\n      </div>\n      <div className=\"publish\">\n        <button className=\"btn_five\" onClick={Publish}>\n          Нийтлэх\n        </button>\n      </div>\n      <ImageUploader\n        withIcon={true}\n        buttonText=\"Choose images\"\n        onChange={setImage}\n        imgExtension={[\".jpg\", \".gif\", \".png\", \".gif\"]}\n        maxFileSize={5242880}\n      />\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}